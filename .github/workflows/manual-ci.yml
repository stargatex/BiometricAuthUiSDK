name: Manual CI

on:
  workflow_dispatch:
    inputs:
      test-matrix:
        description: 'Test matrix (ex: ubuntu-latest,macos-latest,windows-latest)'
        required: false
        default: 'ubuntu-latest,macos-latest,windows-latest'
      cache-read-only:
        description: 'Use read-only cache'
        type: boolean
        default: false

concurrency:
  group: '${{ github.workflow }}-${{ github.actor }}'
  cancel-in-progress: true

jobs:
  manual-ci:
    name: Manual CI Run
    uses: ./.github/workflows/ci-pipeline.yml
    with:
      cache-read-only: ${{ inputs.cache-read-only }}
    secrets: inherit

---

name: Manual Publish

on:
  workflow_dispatch:
    inputs:
      publish-type:
        description: 'Publication type'
        required: true
        type: choice
        options:
          - snapshot
          - release
      version:
        description: 'Version to publish'
        required: false
        type: string

concurrency:
  group: '${{ github.workflow }}-${{ inputs.publish-type }}-${{ github.actor }}'
  cancel-in-progress: false

jobs:
  publish-snapshot:
    name: Publish Snapshot
    if: inputs.publish-type == 'snapshot'
    uses: ./.github/workflows/publish-snapshot.yml
    secrets: inherit

  publish-release:
    name: Publish Release
    if: inputs.publish-type == 'release'
    uses: ./.github/workflows/publish-release.yml
    secrets: inherit

---

name: Manual Documentation

on:
  workflow_dispatch:
    inputs:
      deploy-to-pages:
        description: 'Deploy to GitHub Pages'
        type: boolean
        default: true

concurrency:
  group: '${{ github.workflow }}-${{ github.actor }}'
  cancel-in-progress: true

jobs:
  generate-docs:
    name: Generate Documentation
    uses: ./.github/workflows/documentation.yml
    secrets: inherit